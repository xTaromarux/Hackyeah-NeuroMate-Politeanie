<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="NeuroMate.Views.CognitiveGamesPage"
             Title="Gry Kognitywne"
             BackgroundColor="{StaticResource PageBackground}">

    <ScrollView>
        <Grid Padding="20" RowSpacing="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <Frame Grid.Row="0" Style="{StaticResource CardFrame}">
                <Grid ColumnSpacing="15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Frame Grid.Column="0" 
                           WidthRequest="50" 
                           HeightRequest="50" 
                           CornerRadius="25"
                           Padding="0"
                           BackgroundColor="{StaticResource Success}">
                        <Label Text="🧠" 
                               FontSize="25" 
                               HorizontalTextAlignment="Center" 
                               VerticalTextAlignment="Center" />
                    </Frame>

                    <StackLayout Grid.Column="1" Spacing="5">
                        <Label Text="Gry Kognitywne" 
                               Style="{StaticResource SectionTitle}" />
                        <Label Text="Trenuj swój mózg z mini-grami naukowo potwierdzonymi"
                               Style="{StaticResource Subtitle}" />
                    </StackLayout>
                </Grid>
            </Frame>

            <!-- Test Stroop -->
            <Frame Grid.Row="1" Style="{StaticResource CardFrame}">
                <StackLayout Spacing="15">
                    <Grid ColumnSpacing="15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0" 
                               Text="🎨" 
                               FontSize="30" 
                               VerticalTextAlignment="Center" />

                        <StackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Test Stroop" 
                                   FontAttributes="Bold"
                                   FontSize="18" />
                            <Label Text="Kliknij kolor słowa, nie jego znaczenie. Trenuje uwagę i hamowanie reakcji." 
                                   Style="{StaticResource Subtitle}"
                                   LineBreakMode="WordWrap" />
                        </StackLayout>

                        <Frame Grid.Column="2" 
                               BackgroundColor="{StaticResource Primary}"
                               CornerRadius="15"
                               Padding="8"
                               HasShadow="False">
                            <Label Text="30s" 
                                   TextColor="White" 
                                   FontAttributes="Bold"
                                   FontSize="12" />
                        </Frame>
                    </Grid>

                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0"
                                Text="🎯 Rozpocznij Stroop"
                                Style="{StaticResource PrimaryButton}" />

                        <Frame Grid.Column="1" 
                               BackgroundColor="{StaticResource Gray100}"
                               Padding="10"
                               HasShadow="False">
                            <StackLayout Spacing="2">
                                <Label Text="Rekord" 
                                       FontSize="10" 
                                       HorizontalTextAlignment="Center" />
                                <Label Text="92%" 
                                       FontAttributes="Bold"
                                       FontSize="14"
                                       HorizontalTextAlignment="Center" />
                            </StackLayout>
                        </Frame>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- N-back -->
            <Frame Grid.Row="2" Style="{StaticResource CardFrame}">
                <StackLayout Spacing="15">
                    <Grid ColumnSpacing="15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0" 
                               Text="🔢" 
                               FontSize="30" 
                               VerticalTextAlignment="Center" />

                        <StackLayout Grid.Column="1" Spacing="5">
                            <Label Text="N-back (Pamięć)" 
                                   FontAttributes="Bold"
                                   FontSize="18" />
                            <Label Text="Reaguj gdy bodziec powtarza się sprzed n kroków. Trenuje pamięć roboczą." 
                                   Style="{StaticResource Subtitle}"
                                   LineBreakMode="WordWrap" />
                        </StackLayout>

                        <Frame Grid.Column="2" 
                               BackgroundColor="{StaticResource Success}"
                               CornerRadius="15"
                               Padding="8"
                               HasShadow="False">
                            <Label Text="60s" 
                                   TextColor="White" 
                                   FontAttributes="Bold"
                                   FontSize="12" />
                        </Frame>
                    </Grid>

                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0"
                                Text="1-back"
                                Style="{StaticResource OutlineButton}"
                                FontSize="12" />

                        <Button Grid.Column="1"
                                Text="2-back"
                                Style="{StaticResource PrimaryButton}"
                                FontSize="12" />

                        <Frame Grid.Column="2" 
                               BackgroundColor="{StaticResource Gray100}"
                               Padding="10"
                               HasShadow="False">
                            <StackLayout Spacing="2">
                                <Label Text="Poziom" 
                                       FontSize="10" 
                                       HorizontalTextAlignment="Center" />
                                <Label Text="2" 
                                       FontAttributes="Bold"
                                       FontSize="14"
                                       HorizontalTextAlignment="Center" />
                            </StackLayout>
                        </Frame>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- PVT już jest w głównej stronie, ale dodajmy Task Switching -->
            <Frame Grid.Row="3" Style="{StaticResource CardFrame}">
                <StackLayout Spacing="15">
                    <Grid ColumnSpacing="15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0" 
                               Text="🔄" 
                               FontSize="30" 
                               VerticalTextAlignment="Center" />

                        <StackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Task Switching" 
                                   FontAttributes="Bold"
                                   FontSize="18" />
                            <Label Text="Przełączanie między regułami. Trenuje elastyczność poznawczą." 
                                   Style="{StaticResource Subtitle}"
                                   LineBreakMode="WordWrap" />
                        </StackLayout>

                        <Frame Grid.Column="2" 
                               BackgroundColor="{StaticResource Warning}"
                               CornerRadius="15"
                               Padding="8"
                               HasShadow="False">
                            <Label Text="45s" 
                                   TextColor="White" 
                                   FontAttributes="Bold"
                                   FontSize="12" />
                        </Frame>
                    </Grid>

                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0"
                                Text="🔄 Rozpocznij Switching"
                                Style="{StaticResource SecondaryButton}" />

                        <Frame Grid.Column="1" 
                               BackgroundColor="{StaticResource Gray100}"
                               Padding="10"
                               HasShadow="False">
                            <StackLayout Spacing="2">
                                <Label Text="Średnia" 
                                       FontSize="10" 
                                       HorizontalTextAlignment="Center" />
                                <Label Text="430ms" 
                                       FontAttributes="Bold"
                                       FontSize="12"
                                       HorizontalTextAlignment="Center" />
                            </StackLayout>
                        </Frame>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- Statystyki ogólne -->
            <Frame Grid.Row="4" Style="{StaticResource CardFrame}">
                <StackLayout Spacing="15">
                    <Label Text="📊 Twoje postępy" 
                           Style="{StaticResource SectionTitle}" />
                    
                    <Grid ColumnSpacing="20" RowSpacing="15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Dziś -->
                        <StackLayout Grid.Row="0" Grid.Column="0">
                            <Label Text="Dziś" Style="{StaticResource StatDescription}" />
                            <Label Text="4" Style="{StaticResource StatLabel}" FontSize="24" />
                            <Label Text="sesje" Style="{StaticResource StatDescription}" />
                        </StackLayout>

                        <!-- Ten tydzień -->
                        <StackLayout Grid.Row="0" Grid.Column="1">
                            <Label Text="Ten tydzień" Style="{StaticResource StatDescription}" />
                            <Label Text="23" Style="{StaticResource StatLabel}" FontSize="24" />
                            <Label Text="sesje" Style="{StaticResource StatDescription}" />
                        </StackLayout>

                        <!-- Średnia poprawa -->
                        <StackLayout Grid.Row="0" Grid.Column="2">
                            <Label Text="Poprawa" Style="{StaticResource StatDescription}" />
                            <Label Text="+15%" Style="{StaticResource StatLabel}" FontSize="24" TextColor="{StaticResource Success}" />
                            <Label Text="RT" Style="{StaticResource StatDescription}" />
                        </StackLayout>

                        <!-- Pasek postępu -->
                        <StackLayout Grid.Row="1" Grid.ColumnSpan="3" Spacing="10">
                            <Label Text="Postęp do następnego poziomu" 
                                   Style="{StaticResource Subtitle}"
                                   HorizontalTextAlignment="Center" />
                            
                            <ProgressBar Progress="0.65"
                                         ProgressColor="{StaticResource Success}"
                                         BackgroundColor="{StaticResource Gray200}"
                                         HeightRequest="12" />
                            
                            <Label Text="13/20 sesji do poziomu Expert" 
                                   Style="{StaticResource StatDescription}"
                                   HorizontalTextAlignment="Center" />
                        </StackLayout>
                    </Grid>
                </StackLayout>
            </Frame>
        </Grid>
    </ScrollView>
</ContentPage>
