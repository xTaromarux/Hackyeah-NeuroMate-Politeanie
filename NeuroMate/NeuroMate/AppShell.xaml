<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="NeuroMate.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:NeuroMate"
    xmlns:views="clr-namespace:NeuroMate.Views"
    Title="NeuroMate"
    Shell.BackgroundColor="{StaticResource PageBackground}"
    Shell.TabBarBackgroundColor="{StaticResource CardBackground}"
    Shell.TabBarForegroundColor="{StaticResource Primary}"
    Shell.TabBarTitleColor="{StaticResource TextPrimary}"
    Shell.TabBarUnselectedColor="{StaticResource TextSecondary}">

    <Shell.Resources>
        <ResourceDictionary>
            <!-- Definicja stylów dla zakładek -->
            <Style x:Key="BaseShellItemStyle" TargetType="BaseShellItem">
                <Setter Property="Shell.BackgroundColor" Value="{StaticResource CardBackground}" />
                <Setter Property="Shell.ForegroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TitleColor" Value="{StaticResource TextPrimary}" />
                <Setter Property="Shell.DisabledColor" Value="{StaticResource TextMuted}" />
                <Setter Property="Shell.UnselectedColor" Value="{StaticResource TextSecondary}" />
                <Setter Property="Shell.TabBarBackgroundColor" Value="{StaticResource CardBackground}" />
                <Setter Property="Shell.TabBarForegroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TabBarTitleColor" Value="{StaticResource TextPrimary}" />
                <Setter Property="Shell.TabBarUnselectedColor" Value="{StaticResource TextSecondary}" />
            </Style>
            
            <!-- Style dla TabBar -->
            <Style TargetType="TabBar" BasedOn="{StaticResource BaseShellItemStyle}">
                <Setter Property="Shell.TabBarBackgroundColor" Value="{StaticResource CardBackground}" />
                <Setter Property="Shell.TabBarForegroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TabBarTitleColor" Value="{StaticResource TextPrimary}" />
                <Setter Property="Shell.TabBarUnselectedColor" Value="{StaticResource TextSecondary}" />
            </Style>
            
            <!-- Style dla Tab -->
            <Style TargetType="Tab" BasedOn="{StaticResource BaseShellItemStyle}">
                <Setter Property="Shell.BackgroundColor" Value="Transparent" />
                <Setter Property="Shell.ForegroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TitleColor" Value="{StaticResource TextPrimary}" />
                <Setter Property="Shell.UnselectedColor" Value="{StaticResource TextSecondary}" />
            </Style>
            
            <!-- Style dla ShellContent -->
            <Style TargetType="ShellContent" BasedOn="{StaticResource BaseShellItemStyle}">
                <Setter Property="Shell.BackgroundColor" Value="Transparent" />
                <Setter Property="Shell.ForegroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TitleColor" Value="{StaticResource TextPrimary}" />
                <Setter Property="Shell.UnselectedColor" Value="{StaticResource TextSecondary}" />
            </Style>
        </ResourceDictionary>
    </Shell.Resources>

    <!-- Dolna nawigacja z poprawionymi stylami -->
    <TabBar>
        <ShellContent Title="Dashboard"
                      Icon="🏠"
                      Route="MainPage"
                      ContentTemplate="{DataTemplate local:MainPage}"
                      Shell.ForegroundColor="{StaticResource Primary}"
                      Shell.TitleColor="{StaticResource TextPrimary}"
                      Shell.UnselectedColor="{StaticResource TextSecondary}" />

        <ShellContent Title="Gry"
                      Icon="🧠"
                      Route="CognitiveGamesPage"
                      ContentTemplate="{DataTemplate views:CognitiveGamesPage}"
                      Shell.ForegroundColor="{StaticResource Primary}"
                      Shell.TitleColor="{StaticResource TextPrimary}"
                      Shell.UnselectedColor="{StaticResource TextSecondary}" />

        <ShellContent Title="Interwencje"
                      Icon="🎯"
                      Route="InterventionPage"
                      ContentTemplate="{DataTemplate views:InterventionPage}"
                      Shell.ForegroundColor="{StaticResource Primary}"
                      Shell.TitleColor="{StaticResource TextPrimary}"
                      Shell.UnselectedColor="{StaticResource TextSecondary}" />

        <ShellContent Title="Podsumowanie"
                      Icon="📊"
                      Route="DailySummaryPage"
                      ContentTemplate="{DataTemplate views:DailySummaryPage}"
                      Shell.ForegroundColor="{StaticResource Primary}"
                      Shell.TitleColor="{StaticResource TextPrimary}"
                      Shell.UnselectedColor="{StaticResource TextSecondary}" />

        <ShellContent Title="Ustawienia"
                      Icon="⚙️"
                      Route="OnboardingPage"
                      ContentTemplate="{DataTemplate views:OnboardingPage}"
                      Shell.ForegroundColor="{StaticResource Primary}"
                      Shell.TitleColor="{StaticResource TextPrimary}"
                      Shell.UnselectedColor="{StaticResource TextSecondary}" />
    </TabBar>

    <ShellContent
        Title="Sleep"
        ContentTemplate="{DataTemplate local:SleepPage}" 
        Route="SleepPage" />

</Shell>

